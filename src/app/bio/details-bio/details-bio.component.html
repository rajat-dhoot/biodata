<form [formGroup]="detailsForm">
  <mat-accordion>

    <!-- ############################## Personal Details ######################################### -->
    <mat-expansion-panel
      [expanded]="step === 0"
      (opened)="setStep(0)"
      hideToggle
      formGroupName="personal"
    >
      <mat-expansion-panel-header fxLayout="row">
        <mat-panel-title fxFlex="grow">
          Personal Details
        </mat-panel-title>
        <mat-panel-description fxFlex="nogrow">
          <mat-icon>account_circle</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>

      <div fxLayout="column" fxLayoutGap="20px">
      <mat-form-field fxFlex>
        <input matInput placeholder="Name" formControlName="fullName" (blur)="logValidationMessage('personal')">
        <mat-error>{{formErrors.personal.fullName}}</mat-error>
      </mat-form-field>

      <mat-form-field fxFlex>
        <input matInput placeholder="Date of Birth" [min]="minDate" [max]="maxDate" [matDatepicker]="picker" (focus)="picker.open()" formControlName="birthDate" (blur)="logValidationMessage('personal')" readonly>
        <mat-datepicker touchUi #picker></mat-datepicker>
        <mat-error>{{formErrors.personal.birthDate}}</mat-error>
      </mat-form-field>
        
      <mat-form-field fxFlex>  
        <input matInput type="time" id="birthTime" formControlName="birthTime" max="12:59" min="01:00" placeholder="HH:MM" (blur)="logValidationMessage('personal')"/>
        <mat-error>{{formErrors.personal.birthTime}}</mat-error>
        <mat-button-toggle-group name="timeInterval" formControlName="timeInterval" fxFlex="none">
          <mat-button-toggle value="am">AM</mat-button-toggle>
          <mat-button-toggle value="pm">PM</mat-button-toggle>
        </mat-button-toggle-group>
        <mat-hint>Birth Time</mat-hint>
      </mat-form-field>
      
    <mat-form-field fxFlex>
        <input matInput placeholder="Height" formControlName="height" (blur)="logValidationMessage('personal')">
        <mat-hint>Hyphen(-) Seperated (e.g. 5-10)</mat-hint>
        <mat-error>{{formErrors.personal.height}}</mat-error>
      </mat-form-field>

      <mat-form-field fxFlex>
          <input matInput placeholder="Birth Place" formControlName="hobbies" (blur)="logValidationMessage('personal')">
          <mat-error>{{formErrors.personal.hobbies}}</mat-error>
        </mat-form-field>

        <!-- validation doesn't work on first time however it works from form control parent object -->
        <mat-form-field fxFlex>
          <mat-label>Select an Option</mat-label>
          <mat-select formControlName="complexion" (blur)="logValidationMessage('personal')">
            <mat-option *ngFor="let colour of complexion" [value]="colour">{{colour | titlecase}}</mat-option>
          </mat-select>
          <mat-error>{{formErrors.personal.complexion}}</mat-error>
        </mat-form-field>

      <mat-form-field fxFlex>
        <input matInput placeholder="Blood Group" formControlName="bloodGroup" (blur)="logValidationMessage('personal')"/>
        <mat-error>{{formErrors.personal.bloodGroup}}</mat-error>
      </mat-form-field>

      <mat-form-field fxFlex>
          <input matInput placeholder="Qualification" formControlName="qualification" (blur)="logValidationMessage('personal')">
          <mat-error>{{formErrors.personal.qualification}}</mat-error>
      </mat-form-field>

      <mat-form-field fxFlex>
          <input matInput placeholder="Occupation" formControlName="occupation" (blur)="logValidationMessage('personal')">
          <mat-error>{{formErrors.personal.occupation}}</mat-error>
      </mat-form-field>

      <mat-form-field fxFlex>
          <input matInput placeholder="Hobbies" formControlName="hobbies" (blur)="logValidationMessage('personal')">
          <mat-error>{{formErrors.personal.hobbies}}</mat-error>
      </mat-form-field>
    </div>

      <mat-action-row>
        <button mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>

    </mat-expansion-panel>

    <!-- ############################## Family Details ######################################### -->

    <mat-expansion-panel
      [expanded]="step === 1"
      (opened)="setStep(1)"
      hideToggle
    >
      <mat-expansion-panel-header fxLayout="row">
        <mat-panel-title fxFlex="grow">
          Family Details
        </mat-panel-title>
        <mat-panel-description fxFlex="nogrow">
          <mat-icon>people</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.gt-sm="40px">
      <mat-form-field fxFlex>
        <input matInput placeholder="Father's Name" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Father's Occupation" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Mother's Name" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Mother's Occupation" />
      </mat-form-field>
      </div>
      <mat-action-row
        fxLayout="row"
        style="padding:10px;"
        fxLayoutGap="10px"
        fxLayoutAlign="space-between center"
      >
        <button mat-stroked-button fxFlex="none" (click)="(addBrother)">
          Add Brother
        </button>
        <button mat-stroked-button fxFlex="none" (click)="(addSister)">
          Add Sister
        </button>
      </mat-action-row>
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Previous</button>
        <button mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>
    </mat-expansion-panel>

<!-- ############################## Contact Details ######################################### -->

    <mat-expansion-panel
      [expanded]="step === 2"
      (opened)="setStep(2)"
      hideToggle
    >
      <mat-expansion-panel-header fxLayout="row">
        <mat-panel-title fxFlex="grow">
          Contact Details
        </mat-panel-title>
        <mat-panel-description fxFlex="nogrow">
          <mat-icon>contacts</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.gt-sm="40px">
      <mat-form-field fxFlex>
        <input matInput placeholder="Residence Address" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Contact #1" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Contact #2" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Email" />
      </mat-form-field>
    </div>
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Previous</button>
        <button mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>
    </mat-expansion-panel>

    <!-- ############################## Paternal Details ######################################### -->
    
    <mat-expansion-panel
      [expanded]="step === 3"
      (opened)="setStep(3)"
      hideToggle
    >
      <mat-expansion-panel-header fxLayout="row">
        <mat-panel-title fxFlex="grow">
          Paternal Details
        </mat-panel-title>
        <mat-panel-description fxFlex="nogrow">
          <mat-icon>view_list</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.gt-sm="40px">
      <mat-form-field fxFlex>
        <input matInput placeholder="Grand Father's Name" />
      </mat-form-field>
      <mat-form-field fxFlex>
        <input matInput placeholder="Grand Mother's Name" />
      </mat-form-field>
    </div>
      <mat-action-row
      fxLayout="row"
      style="padding:10px;"
      fxLayoutGap="10px"
      fxLayoutAlign="space-between center"
    >
      <button mat-stroked-button fxFlex="none" (click)="(addBrother)">
        Add Uncle
      </button>
      <button mat-stroked-button fxFlex="none" (click)="(addSister)">
        Add Aunt
      </button>
    </mat-action-row>

      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Previous</button>
        <button mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>
    </mat-expansion-panel>

<!-- ############################## Maternal Details ######################################### -->
    
    <mat-expansion-panel
      [expanded]="step === 4"
      (opened)="setStep(4)"
      hideToggle
    >
      <mat-expansion-panel-header fxLayout="row">
        <mat-panel-title fxFlex="grow">
          Maternal Details
        </mat-panel-title>
        <mat-panel-description fxFlex="nogrow">
          <mat-icon>view_list</mat-icon>
        </mat-panel-description>
      </mat-expansion-panel-header>
      <div fxLayout="row wrap" fxLayout.lt-md="column" fxLayoutGap.gt-sm="40px">
      <mat-form-field fxFlex="45%">
          <input matInput placeholder="Grand Father's Name" />
        </mat-form-field>
        <mat-form-field fxFlex="45%">
          <input matInput placeholder="Grand Mother's Name" />
        </mat-form-field>
      </div>
        <mat-action-row
        fxLayout="row"
        style="padding:10px;"
        fxLayoutGap="10px"
        fxLayoutAlign="space-between center"
      >
        <button mat-stroked-button fxFlex="none" (click)="(addBrother)">
          Add Uncle
        </button>
        <button mat-stroked-button fxFlex="none" (click)="(addSister)">
          Add Aunt
        </button>
      </mat-action-row>
  
      <mat-action-row>
        <button mat-button color="warn" (click)="prevStep()">Previous</button>
        <button mat-button color="primary" (click)="nextStep()">Next</button>
      </mat-action-row>
    </mat-expansion-panel>

  </mat-accordion>
</form>
